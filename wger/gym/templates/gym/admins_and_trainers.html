{% load i18n staticfiles wger_extras %}

<link rel="stylesheet" type="text/css" href="{% static 'bower_components/datatables/media/css/dataTables.bootstrap.min.css' %}">
<script src="{% static 'bower_components/datatables/media/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'bower_components/datatables/media/js/dataTables.bootstrap.min.js' %}"></script>
<script>
    $(document).ready(function() {
        /* Make table sortable */
        $('#administrators_and_trainers').DataTable({
            paging: true,
            bFilter: true,
            bInfo: false,
            lengthMenu: [
                [10, 25, 50, -1],
                [10, 25, 50, "All"]
            ]
        });
    });
</script>

<table class="table table-hover" id="administrators_and_trainers">
    <thead>
        <tr>
            <th>{% trans "Index" %}</th>
            <th>{% trans "Username" %}</th>
            <th>{% trans "Name" %}</th>
            {% if perms.gym.manage_gym or perms.gym.manage_gyms %}
            <th>{% trans "Roles" %}</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        {% for current_user in object_list.admins %}
        <tr>
            <td>
                {{current_user.index}}
            </td>
            <td>
                {% if perms.gym.manage_gym or perms.gym.manage_gyms %}
                <a href="{% url 'core:user:overview' current_user.obj.pk %}">{{current_user.obj}}</a> {% else %} {{current_user.obj}} {% endif %}
            </td>
            <td>
                {{current_user.obj.get_full_name}}
            </td>

            {% if perms.gym.manage_gym or perms.gym.manage_gyms %}
            <td>
                {% if current_user.perms.gym_trainer %}
                <span class="label label-primary">{% trans "Trainer" %}</span> {% endif %} {% if current_user.perms.manage_gym %}
                <span class="label label-primary">{% trans "Gym manager" %}</span> {% endif %} {% if current_user.perms.manage_gyms %}
                <span class="label label-primary">{% trans "General manager" %}</span> {% endif %}

                <a href="{% url 'gym:gym:edit-user-permission' current_user.obj.pk %}" class="btn btn-default btn-xs wger-modal-dialog pull-right">
                    <span class="{% fa_class 'cog' %}"></span>
                </a>
            </td>
            {% endif %}
        </tr>
        {% empty %}
        <tr>
            <td colspan="4">{% trans "This gym has no administrators or trainers" %}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>